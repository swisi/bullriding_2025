{% extends "base.html" %}
{% block content %}
  <div class="container py-4">
    <script>
      // Auto-refresh every 30 seconds
      setTimeout(function(){ window.location.reload(); }, 30000);
    </script>
    {% if participant %}
      <div class="text-center">
        <h1 class="display-4 mb-3">Aktiver Teilnehmer</h1>
        <div class="mb-4">
          <span class="badge badge-primary" style="font-size:1.1rem;">Start Nr. {{ participant.start_nr or '-' }}</span>
        </div>
        {% if participant.photo %}
          <div class="mb-3">
            <img src="{{ url_for('static', filename=participant.photo) }}" alt="Foto von {{ participant.first_name }} {{ participant.last_name }}" class="img-fluid rounded" style="max-height: 320px;">
          </div>
        {% endif %}
        <h2 style="font-size:2rem;">{{ participant.first_name }} {{ participant.last_name }}</h2>
        <p class="text-muted" style="font-size:1.1rem;">{{ participant.city }}</p>
      </div>

      <div class="row mt-4">
        <div class="col-md-6 mx-auto">
          <table class="table table-striped table-hover table-sm text-center" style="font-size:1.1rem;">
            <thead>
              <tr>
                <th>Runde</th>
                <th>Zeit (s)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Vorrunde 1</td><td>{{ participant.time1 or '-' }}</td></tr>
              <tr><td>Vorrunde 2</td><td>{{ participant.time2 or '-' }}</td></tr>
              <tr><td>Vorrunde 3</td><td>{{ participant.time3 or '-' }}</td></tr>
              <tr class="table-secondary"><td>Top VR</td><td>{{ participant.toptime_Vorrunde or '-' }}</td></tr>
              <tr><td>Zwischenrunde 1</td><td>{{ participant.time4 or '-' }}</td></tr>
              <tr><td>Zwischenrunde 2</td><td>{{ participant.time5 or '-' }}</td></tr>
              <tr class="table-secondary"><td>Top ZR</td><td>{{ participant.toptime_Zwischenrunde or '-' }}</td></tr>
              <tr><td>Finale</td><td>{{ participant.time6 or '-' }}</td></tr>
              <tr class="table-secondary"><td>Top Final</td><td>{{ participant.toptime_Finalrunde or '-' }}</td></tr>
            </tbody>
          </table>
        </div>
      </div>

    {% else %}
      <div class="text-center py-5">
        <h1 class="display-5">Kein aktiver Teilnehmer</h1>
        <p class="text-muted">Sobald ein Teilnehmer aktiviert ist, werden die Details hier angezeigt.</p>
      </div>
    {% endif %}
  </div>
{% endblock %}
